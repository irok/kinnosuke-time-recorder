# Kinnosuke Time Recorder
万屋一家シリーズのクラウド型勤怠管理システム「勤之助」のタイムレコーダーを押すためのChrome拡張です。<br/>

勤之助はログインした状態でいられる時間が短く、一々ログインし直さなければなりませんが、この拡張を使うとログインしたままにすることができ、ストレスなく素早く勤怠ボタンを押すことができます。<br/>
また、拡張機能アイコンをクリックするとメインメニューも表示されるので、「出勤簿」や「各種申請」などを直接開くことができます。<br/>

## インストール
Chromeウェブストアから「[勤之助タイムレコーダー](https://chromewebstore.google.com/detail/%E5%8B%A4%E4%B9%8B%E5%8A%A9%E3%82%BF%E3%82%A4%E3%83%A0%E3%83%AC%E3%82%B3%E3%83%BC%E3%83%80%E3%83%BC/ffnkngcgjibanokeippfaljfabaenfnn?hl=ja)」をインストールしてください。<br/>

## 使い方
- 拡張機能をインストールしたら、アイコンをツールバーに表示します。
- 設定画面が開くので、勤之助のログイン情報を入力します。
- アイコンをクリックし、「出社」や「退社」を押すと打刻されます。
- ![勤之助](https://github.com/irok/kinnosuke-time-recorder/raw/master/extension/images/icon19.png) のところに表示される小さな ■ は現在の状態を表しています。
    - 黄：未出社
    - 緑：出社
    - 青：退社

## 安全性について
- ログイン情報はブラウザに保存し、勤之助へのログインにのみ使用します。
- Chromeの同期をオンにしている場合はGoogleのサーバーにも保管されます。
- パスワードは暗号化していますが、暗号鍵も一緒に保存しています。

## 開発方針について
本拡張機能は以下の方針に基づいて開発しています。<br/>

- この拡張の目的は「ログインの手間を省き、勤怠ボタンを押したり勤之助を開いたりできること」です。勤之助を開けば済む複雑な機能は追加しません。
- 勤之助は導入組織ごとにカスタマイズが可能ですが、どの組織でも動くことを目指しています。特定の組織でしか動作しない機能は追加しません。

機能のご提案・ご要望を頂く際は、上記方針に沿ったものかご確認ください。<br/>

なお、この方針に沿わない場合でも、forkして機能追加し、個人で利用したり自組織内で配布する分には構いません。<br/>
Chromeウェブストアに公開する場合は「非公開（ドメイン内のユーザーのみ閲覧可能）」としてください。（非公開が選択できない場合は「限定公開」でも可）<br/>

## 開発する
このリポジトリを fork し、ローカルに clone してください。<br/>
chrome://extensions/ の「デベロッパーモード」をチェックし、「パッケージ化されていない拡張機能を読み込む」で extension ディレクトリを指定するとインストールされます。<br/>
コードを書き換えたら chrome://extensions/ の画面で再読み込みしてください。<br/>

## 更新履歴
- v4.0.3 (2024-01-27)
    - 出社リマインドまわりを改善
- v4.0.2 (2024-01-26)
    - バグやコードの修正
- v4.0.1 (2024-01-24)
    - いくつかのバグ、コード、コメントを修正
- v4.0.0 (2024-01-23)
    - manifest v3 への対応
    - それに伴いコードを刷新
    - いくつかの機能は削除しました
- v3.3.2 (2019-07-17)
    - update jquery 3.1.1 -> 3.4.1

- v3.3.2 (2019-04-10)
    - 出勤状況の表示崩れを修正

- v3.3.1 (2019-03-25)
    - 不具合を修正

- v3.3.0 (2019-03-25)
    - 当月の出勤状況が確認できるようになりました [#6](https://github.com/irok/kinnosuke-time-recorder/pull/6)

- v3.2.1 (2019-02-18)
    - オフラインの状態だとエラーが出続ける問題が解消しました [#7](https://github.com/irok/kinnosuke-time-recorder/pull/7)

- v3.2.0 (2018-04-27)
    - 出退勤の定期通知ができるようになりました [#4](https://github.com/irok/kinnosuke-time-recorder/pull/4)

- v3.1.0 (2018-01-10)
    - 出社、退社時の確認メッセージを編集できるよう修正

- v3.0.0 (2018-01-04)
    - メニューを自動取得するよう修正
    - www.e4628.jp に対応

- v2.1.7 (2017-02-09)
    - 不具合を修正
    - モジュールをアップデート

- v2.1.4 (2017-02-08)
    - Chromeがマテリアルデザインになってバッジの色が見にくくなったのを修正

- v2.1.3 (2014-10-16)
    - Chromeの仕様変更(?)に合わせCSSを修正した

- v2.1.2 (2014-08-18)
    - setTimeoutの利用を廃止した（プロセスが残る問題への対応）

- v2.1.1 (2014-08-01)
    - プラグインを再起動してもステータスが反映されるようにした

- v2.1.0 (2014-07-31)
    - Background PagesからEvent Pagesに変更した
        - ただし、Ajaxで勤之助へのログインを行うとプロセスが残ってしまう（原因特定できず）
    - 勤之助のページを開いて勤怠ボタンを押したのが反映されるよう修正した
    - gulpでビルドするようにした
    - jsライブラリをbowerで管理するようにし、リポジトリから外した

- v2.0.2 (2014-06-18)
    - 「打刻忘れ／訂正」申請がカスタムメニューである可能性があったので「各種申請」に変更

- v2.0.1 (2014-04-28)
    - 勤之助側で問題が生じていると勤之助を開けない問題を修正

- v2.0.0 (2014-04-10)
    - コードを整理して見通しをよくした
    - 未読のお知らせが分かるようにした

